---
import Sidebar from "~components/Sidebar.astro";
import RootLayout from "./RootLayout.astro";
import type { CollectionEntry } from "astro:content";

export interface Props {
  project: CollectionEntry<"projects">;
  devlogs: CollectionEntry<"devlogs">[];
}

const { project, devlogs } = Astro.props;
---

<RootLayout head={{}}>
  <main class="flex h-screen">
    <Sidebar
      header={{
        title: project.data.name,
        href: new URL(project.id, Astro.site).toString(),
      }}
      items={devlogs.map((log) => ({
        text: log.id.split("/").pop()!,
        href: new URL(
          project.id + "/" + log.id.split("/").pop()!,
          Astro.site
        ).toString(),
      }))}
    />
    <div class="w-full h-screen overflow-scroll">
      <article
        class="flex-1 overflow-y-auto p-8 prose dark:prose-invert prose-hr:border-black/20 dark:prose-hr:border-white/20 prose-a:underline prose-a:underline-offset-4 mx-auto"
      >
        <slot />
      </article>
    </div>
  </main>
</RootLayout>
